import { Router } from 'express';
import { studentController } from '../controllers/student.controller.js';
import { authMiddleware } from '../middlewares/auth.middleware.js';
import { roleMiddleware } from '../middlewares/role.middleware.js';
import { resumeUploadMiddleware } from '../middlewares/upload.middleware.js';
import { validateBody } from '../middlewares/validate.middleware.js';
import { updateStudentProfileDtoSchema } from '../validators/student.validator.js';
const studentRouter = Router();
studentRouter.use(authMiddleware);
studentRouter.get('/me', roleMiddleware('student', 'admin'), studentController.getOwnProfile);
studentRouter.delete('/me', roleMiddleware('student'), studentController.deleteOwnProfile);
studentRouter.patch('/:studentId', roleMiddleware('student', 'admin'), validateBody(updateStudentProfileDtoSchema), studentController.updateProfile);
studentRouter.get('/:studentId', roleMiddleware('student', 'admin'), studentController.getById);
studentRouter.get('/', roleMiddleware('admin'), studentController.list);
studentRouter.delete('/:studentId', roleMiddleware('admin'), studentController.delete);
studentRouter.post('/:studentId/resume', roleMiddleware('student', 'admin'), resumeUploadMiddleware, studentController.uploadResume);
studentRouter.delete('/:studentId/resume', roleMiddleware('student', 'admin'), studentController.deleteResume);
studentRouter.post('/:studentId/skills', roleMiddleware('student', 'admin'), studentController.addSkill);
studentRouter.delete('/:studentId/skills', roleMiddleware('student', 'admin'), studentController.removeSkill);
export default studentRouter;
